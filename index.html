<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="css/styles.css" />

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        <script src="sample.js"></script>
        <!-- obj_sample -->
        <script>
            $(document).ready(function() {
                refreshSample(0);
            });

            var auto_fact_style = Object.keys(obj_sample)[0]
            var task = Object.keys(obj_sample[auto_fact_style])[0]
            var model = Object.keys(obj_sample[auto_fact_style][task])[0]
            var auto_fact_solver = Object.keys(obj_sample[auto_fact_style][task][model])[0]
            var auto_fact_rank = Object.keys(obj_sample[auto_fact_style][task][model][auto_fact_solver])[0]
            
            var acc_ori = obj_sample[auto_fact_style][task][model][auto_fact_solver][-1]["acc"]
            var memory_ori = obj_sample[auto_fact_style][task][model][auto_fact_solver][-1]["memory"]
            var gpu_ori = obj_sample[auto_fact_style][task][model][auto_fact_solver][-1]["gpu_time"]
            var cpu_ori = obj_sample[auto_fact_style][task][model][auto_fact_solver][-1]["cpu_time"]

            var acc_fact = obj_sample[auto_fact_style][task][model][auto_fact_solver][auto_fact_rank]["acc"]
            var memory_fact = obj_sample[auto_fact_style][task][model][auto_fact_solver][auto_fact_rank]["memory"]
            var gpu_fact = obj_sample[auto_fact_style][task][model][auto_fact_solver][auto_fact_rank]["gpu_time"]
            var cpu_fact = obj_sample[auto_fact_style][task][model][auto_fact_solver][auto_fact_rank]["cpu_time"]
            var mem_fact = obj_sample[auto_fact_style][task][model][auto_fact_solver][auto_fact_rank]["memory"]
            var param_fact = obj_sample[auto_fact_style][task][model][auto_fact_solver][auto_fact_rank]["parameter"]

            function refreshSample(level_tree){
                if (level_tree == 0){
                    $("#pre_training_autofact_model").show()
                    $(".training_phase").show()
                    $("#post_training_autofact_model").hide()
                    $("#submodule_import").hide()
                    $("#submodule_call").hide()
                }

                if(level_tree == 1){
                    var auto_fact_style_select = document.getElementById('auto-fact-style');
                    auto_fact_style = auto_fact_style_select.value;

                    $('#colab-auto-fact-style').text(auto_fact_style)

                    if (auto_fact_style == "Factorization-by-design"){
                        $("#pre_training_autofact_model").show()
                        $(".training_phase").show()
                        $("#post_training_autofact_model").hide()
                        $("#submodule_import").hide()
                        $("#submodule_call").hide()
                        $("#submodule_param").text("None")
                    } else if (auto_fact_style == "Post-training"){
                        $("#pre_training_autofact_model").hide()
                        $(".training_phase").show()
                        $("#post_training_autofact_model").show()
                        $("#submodule_import").show()
                        $("#submodule_call").show()
                        $("#submodule_param").text("submodules")
                    } else if (auto_fact_style == "In-context Learning"){
                        $("#pre_training_autofact_model").hide()
                        $(".training_phase").hide()
                        $("#post_training_autofact_model").show()
                        $("#submodule_import").show()
                        $("#submodule_call").show()
                        $("#submodule_param").text("submodules")
                    }

                    task = Object.keys(obj_sample[auto_fact_style])[0]
                    model = Object.keys(obj_sample[auto_fact_style][task])[0]
                    auto_fact_solver = Object.keys(obj_sample[auto_fact_style][task][model])[0]
                    auto_fact_rank = Object.keys(obj_sample[auto_fact_style][task][model][auto_fact_solver])[0]
                } else if(level_tree == 2){
                    var task_select = document.getElementById('task');
                    task = task_select.value;

                    model = Object.keys(obj_sample[auto_fact_style][task])[0]
                    auto_fact_solver = Object.keys(obj_sample[auto_fact_style][task][model])[0]
                    auto_fact_rank = Object.keys(obj_sample[auto_fact_style][task][model][auto_fact_solver])[0]
                } else if(level_tree == 3){
                    var model_select = document.getElementById('model');
                    model = model_select.value;

                    auto_fact_solver = Object.keys(obj_sample[auto_fact_style][task][model])[0]
                    auto_fact_rank = Object.keys(obj_sample[auto_fact_style][task][model][auto_fact_solver])[0]
                } else if(level_tree == 4){
                    var auto_fact_solver_select = document.getElementById('auto-fact-solver');
                    auto_fact_solver = auto_fact_solver_select.value;

                    auto_fact_rank = Object.keys(obj_sample[auto_fact_style][task][model][auto_fact_solver])[0]
                } else if(level_tree == 5){
                    auto_fact_rank_select = document.getElementById('auto-fact-rank');
                    auto_fact_rank = auto_fact_rank_select.value;
                }

                acc_ori = obj_sample[auto_fact_style][task][model][auto_fact_solver][-1]["acc"]
                memory_ori = obj_sample[auto_fact_style][task][model][auto_fact_solver][-1]["memory"]
                param_ori = obj_sample[auto_fact_style][task][model][auto_fact_solver][-1]["parameter"]
                gpu_ori = obj_sample[auto_fact_style][task][model][auto_fact_solver][-1]["gpu_time"]
                cpu_ori = obj_sample[auto_fact_style][task][model][auto_fact_solver][-1]["cpu_time"]

                acc_fact = obj_sample[auto_fact_style][task][model][auto_fact_solver][auto_fact_rank]["acc"]
                memory_fact = obj_sample[auto_fact_style][task][model][auto_fact_solver][auto_fact_rank]["memory"]
                param_fact = obj_sample[auto_fact_style][task][model][auto_fact_solver][auto_fact_rank]["parameter"]
                gpu_fact = obj_sample[auto_fact_style][task][model][auto_fact_solver][auto_fact_rank]["gpu_time"]
                cpu_fact = obj_sample[auto_fact_style][task][model][auto_fact_solver][auto_fact_rank]["cpu_time"]

                $("#rank_pre").text(auto_fact_rank);
                $("#rank_post").text(auto_fact_rank);

                $(".model_type").text("'" + model.toLowerCase() + "'")

                solver_span = document.getElementById("solver");
                solver_span.textContent = "'" + auto_fact_solver.toLowerCase() + "'"

                acc_ori_span = document.getElementById("acc_ori");
                acc_ori_span.textContent = acc_ori
                memory_ori_span = document.getElementById("memory_ori");
                memory_ori_span.textContent = memory_ori
                param_ori_span = document.getElementById("param_ori");
                param_ori_span.textContent = param_ori
                gpu_ori_span = document.getElementById("gpu_ori");
                gpu_ori_span.textContent = gpu_ori
                cpu_ori_span = document.getElementById("cpu_ori");
                cpu_ori_span.textContent = cpu_ori

                acc_fact_span = document.getElementById("acc_fact");
                acc_fact_span.textContent = acc_fact
                memory_fact_span = document.getElementById("memory_fact");
                memory_fact_span.textContent = memory_fact
                param_fact_span = document.getElementById("param_fact");
                param_fact_span.textContent = param_fact
                gpu_fact_span = document.getElementById("gpu_fact");
                gpu_fact_span.textContent = gpu_fact
                cpu_fact_span = document.getElementById("cpu_fact");
                cpu_fact_span.textContent = cpu_fact

                $("#down_acc").hide()
                $("#up_acc").hide()
                if(acc_ori < acc_fact){
                    $("#down_acc").hide()
                    $("#up_acc").show()
                } else if(acc_ori > acc_fact){
                    $("#down_acc").show()
                    $("#up_acc").hide()
                }

                $("#down_memory").hide()
                $("#up_memory").hide()
                if(memory_ori > memory_fact){
                    $("#down_memory").hide()
                    $("#up_memory").show()
                } else if(memory_ori < memory_fact){
                    $("#down_memory").show()
                    $("#up_memory").hide()
                }

                $("#down_param").hide()
                $("#up_param").hide()
                if(param_ori > param_fact){
                    $("#down_param").hide()
                    $("#up_param").show()
                } else if(param_ori < param_fact){
                    $("#down_param").show()
                    $("#up_param").hide()
                }

                $("#down_gpu").hide()
                $("#up_gpu").hide()
                if(gpu_ori > gpu_fact){
                    $("#down_gpu").hide()
                    $("#up_gpu").show()
                } else if(gpu_ori < gpu_fact){
                    $("#down_gpu").show()
                    $("#up_gpu").hide()
                }

                $("#down_cpu").hide()
                $("#up_cpu").hide()
                if(cpu_ori > cpu_fact){
                    $("#down_cpu").hide()
                    $("#up_cpu").show()
                } else if(cpu_ori < cpu_fact){
                    $("#down_cpu").show()
                    $("#up_cpu").hide()
                }

                speed_margin_span = document.getElementById("speed_margin");
                speed_margin = (Math.round((gpu_ori - gpu_fact) * 10000 / gpu_ori) / 100)
                if (speed_margin < 0){
                    $('#gpu_fact_title').removeAttr('positive-badge')
                    $('#gpu_fact_title').attr('negative-badge', '+' + Math.abs(speed_margin) + '%')
                    $('#speed_sign').text('reduction')
                } else {
                    $('#gpu_fact_title').removeAttr('negative-badge')
                    $('#gpu_fact_title').attr('positive-badge', '-' + Math.abs(speed_margin) + '%')
                    $('#speed_sign').text('boost')
                }
                speed_margin_span.textContent = Math.abs(speed_margin) + "%"

                cpu_speed_margin = (Math.round((cpu_ori - cpu_fact) * 10000 / cpu_ori) / 100)
                if (cpu_speed_margin < 0){
                    $('#cpu_fact_title').removeAttr('positive-badge')
                    $('#cpu_fact_title').attr('negative-badge', '+' + Math.abs(cpu_speed_margin) + '%')
                } else {
                    $('#cpu_fact_title').removeAttr('negative-badge')
                    $('#cpu_fact_title').attr('positive-badge', '-' + Math.abs(cpu_speed_margin) + '%')
                }

                memory_margin = (Math.round((memory_ori - memory_fact) * 10000 / memory_ori) / 100)
                if (memory_margin < 0){
                    $('#memory_fact_title').removeAttr('positive-badge')
                    $('#memory_fact_title').attr('negative-badge', '+' + Math.abs(memory_margin) + '%')
                } else {
                    $('#memory_fact_title').removeAttr('negative-badge')
                    $('#memory_fact_title').attr('positive-badge', '-' + Math.abs(memory_margin) + '%')
                }

                param_margin = (Math.round((param_ori - param_fact) * 10000 / param_ori) / 100)
                if (param_margin < 0){
                    $('#param_fact_title').removeAttr('positive-badge')
                    $('#param_fact_title').attr('negative-badge', '+' + Math.abs(param_margin) + '%')
                } else {
                    $('#param_fact_title').removeAttr('negative-badge')
                    $('#param_fact_title').attr('positive-badge', '-' + Math.abs(param_margin) + '%')
                }

                performance_margin_span = document.getElementById("performance_margin");
                performance_margin = (Math.round((acc_ori - acc_fact) * 100) / 100)
                if (performance_margin < 0){
                    $('#acc_fact_title').removeAttr('negative-badge')
                    $('#acc_fact_title').attr('positive-badge', '+' + Math.abs(performance_margin) + '%')
                    $('#performance_sign').text('increase')
                } else {
                    $('#acc_fact_title').removeAttr('positive-badge')
                    $('#acc_fact_title').attr('negative-badge', '-' + Math.abs(performance_margin) + '%')
                    $('#performance_sign').text('decrease')
                }
                performance_margin_span.textContent = Math.abs(performance_margin) + "%"

                if ((speed_margin > 0) & (performance_margin < 0)){
                    $('#trade-off').text('with additional')
                } else {
                    $('#trade-off').text('in exchange of')
                }

                console.log(gpu_fact)

                if(level_tree < 1){
                    opt_auto_fact = Object.keys(obj_sample)
                    console.log(opt_auto_fact)
                    var auto_fact_style_select = document.getElementById('auto-fact-style');
                    while (auto_fact_style_select.firstChild) {
                        auto_fact_style_select.removeChild(auto_fact_style_select.firstChild);
                    }
                    for (let i=0; i<opt_auto_fact.length; i++){
                        var o = document.createElement("option");
                        o.value = opt_auto_fact[i];
                        o.text = opt_auto_fact[i];
                        auto_fact_style_select.appendChild(o);
                    }
                }
                if(level_tree < 2){
                    opt_task = Object.keys(obj_sample[auto_fact_style])
                    console.log(opt_task)
                    var task_select = document.getElementById('task');
                    while (task_select.firstChild) {
                        task_select.removeChild(task_select.firstChild);
                    }
                    for (let i=0; i<opt_task.length; i++){
                        var o = document.createElement("option");
                        o.value = opt_task[i];
                        o.text = opt_task[i];
                        task_select.appendChild(o);
                    }
                }
                if(level_tree < 3){
                    opt_model = Object.keys(obj_sample[auto_fact_style][task])
                    console.log(opt_model)
                    var model_select = document.getElementById('model');
                    while (model_select.firstChild) {
                        model_select.removeChild(model_select.firstChild);
                    }
                    for (let i=0; i<opt_model.length; i++){
                        var o = document.createElement("option");
                        o.value = opt_model[i];
                        o.text = opt_model[i];
                        model_select.appendChild(o);
                    }
                }
                if(level_tree < 4){
                    opt_auto_fact_solver = Object.keys(obj_sample[auto_fact_style][task][model])
                    console.log(opt_auto_fact_solver)
                    var auto_fact_solver_select = document.getElementById('auto-fact-solver');
                    while (auto_fact_solver_select.firstChild) {
                        auto_fact_solver_select.removeChild(auto_fact_solver_select.firstChild);
                    }
                    for (let i=0; i<opt_auto_fact_solver.length; i++){
                        var o = document.createElement("option");
                        o.value = opt_auto_fact_solver[i];
                        o.text = opt_auto_fact_solver[i];
                        auto_fact_solver_select.appendChild(o);
                    }
                }
                if(level_tree < 5){
                    opt_auto_fact_rank = Object.keys(obj_sample[auto_fact_style][task][model][auto_fact_solver])
                    console.log(opt_auto_fact_rank)
                    var auto_fact_rank_select = document.getElementById('auto-fact-rank');
                    while (auto_fact_rank_select.firstChild) {
                        auto_fact_rank_select.removeChild(auto_fact_rank_select.firstChild);
                    }
                    for (let i=0; i<opt_auto_fact_rank.length; i++){
                        if(opt_auto_fact_rank[i] != -1){
                            var o = document.createElement("option");
                            o.value = opt_auto_fact_rank[i];
                            o.text = opt_auto_fact_rank[i];
                            auto_fact_rank_select.appendChild(o);
                        }
                    }
                }
            }

            function updateResult(){
                // get settings
                var auto_fact_style_select = document.getElementById('auto-fact-style');
                var auto_fact_style_value = auto_fact_style_select.options[auto_fact_style_select.selectedIndex].value;
                
                var task_select = document.getElementById('task');
                var task_value = task_select.options[task_select.selectedIndex].value;

                var model_select = document.getElementById('model');
                var model_value = model_select.options[model_select.selectedIndex].value;

                var auto_fact_solver_select = document.getElementById('auto-fact-solver');
                var auto_fact_solver_value = auto_fact_solver_select.options[auto_fact_solver_select.selectedIndex].value;

                var auto_fact_rank_select = document.getElementById('auto-fact-rank');
                var auto_fact_rank_value = auto_fact_rank_select.options[auto_fact_rank_select.selectedIndex].value;
            }

            function copy() {
                var selection = window.getSelection();
                var pip_text = document.querySelector('.pip-auto-fact-text');

                navigator.clipboard.writeText(pip_text.value)
                    .then(() => console.log(pip_text.value))
                    .catch(err => console.log('Async writeText failed with error: "' + err + '"'));
            }
        </script>
        <link rel="icon" type="image/png" href="favicon.png">
        <title>Greenformer</title>
        <meta name="viewport" content="initial-scale=1.0, width=device-width">
    </head>
    <body style="position: absolute; width: 100%;">
        <div id="home" class="banner-auto-fact pb-3">
            <nav class="navbar navbar-autofact">
                <div class="container container-fluid">
                    <a class="navbar-brand fw-bold text-light" href="#"><span class="_green">Green</span><span class="_former">former</span></a>
                    <div class="nav">
                        <a class="nav-link text-light" href="#demo">In Action</a>
                        <a class="nav-link text-light" href="#examples">Examples</a>
                        <a class="nav-link text-light" href="#about">Details</a>
                        <a class="nav-link text-light" href="#contact">Contact</a>
                    </div>
                </div>
            </nav>
            <div>
                <div class="container container-fluid">
                    <div class="row my-5 justify-content-between align-middle align-items-center">
                        <!-- <div class="col-1"></div> -->
                        <div id="intro-auto-fact" class="card card-autofact col-7">
                            <div class="card-body">
                                <div class="card-title display-3">
                                    <div class="lead" style="font-size: 0.4em;">Develop fast and efficient models with</div>
                                </div>
                                <div class="card-title display-3 mb-3">
                                    <b style="font-family: 'Helvetica Neue', sans-serif; font-weight: 700;"><span class="_green">Green</span><span class="_former">former</span></b>
                                </div>
                                <div class="card-text" style="text-align: justify;">
                                    Improve your neural networks efficiency through matrix factorization. Greenformer accelerates the computation of a neural network and significantly reduce its memory usage. Greenformer can be easily applied with a single line of code to any neural network for a wide range of scenarios while maintaining its performance.
                                </div>
                            </div>
                            <div class="card-footer" style="border: none !important;">
                                <div class="pip-auto-fact input-group my-3">
                                    <input type="text" class="form-control pip-auto-fact-text" value="pip install greenformer" aria-describedby="pip-auto-fact-button" size="23" disabled>
                                    <button class="btn btn-light pip-auto-fact-button" type="button" id="pip-auto-fact-button" data-bs-toggle="popover" data-bs-trigger="focus" data-bs-title="Copied!" onclick="copy();"><i class="fas fa-copy"></i></button>
                                </div>
                            </div>
                        </div>
                        <div id="intro-image-auto-fact" class="col-4">
                            <div class="card" style="background: #00000000; border: none;">
                                <img src="img/code.png" style="width: 100%;"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="demo-auto-fact container container-fluid">
            <div>
                <div id="demo" class="display-5 text-center demo-title-box-auto-fact p-2">See <b style="font-weight: 700;"><span class="_green">Green</span><span class="_former">former</span></b> in action</div>
                <div class="lead text-center m-3">Change the parameters and see the magic of <b style="font-weight: 700;"><span class="_green">Green</span><span class="_former">former</span></b></div>
                <div class="form-auto-fact row g-3 mx-1 my-2 p-3 justify-content-between">
                    <div class="col-2 select-auto-fact">
                        <label for="auto-fact-style" class="form-label mx-1">Greenformer for</label>
                        <select id="auto-fact-style" class="form-select" onchange=refreshSample(1)>
                            <option value="pre-training">Pre-training</option>
                            <option value="post-fine-tuning">Post fine-tuning</option>
                            <option value="context-learning">In-context learning</option>
                        </select>
                    </div>
                    <div class="col-2 select-auto-fact">
                        <label for="task" class="form-label mx-1">Task</label>
                        <select id="task" class="form-select" onchange=refreshSample(2)>
                            <option value="imdb">IMDB</option>
                            <option value="sst">SST</option>
                            <option value="mnli-matched">MNLI_matched</option>
                            <option value="mnli-mismatched">MNLI_mismatched</option>
                            <option value="cifar-10">CIFAR-10</option>
                            <option value="cifar-100">CIFAR-100</option>
                        </select>
                    </div>
                    <div class="col-2 select-auto-fact">
                        <label for="model" class="form-label mx-1">Model</label>
                        <select id="model" class="form-select" onchange=refreshSample(3)>
                            <option value="transformer-4l">Transformer-4L</option>
                        </select>
                    </div>
                    <div class="col-2 select-auto-fact">
                        <label for="auto-fact-solver" class="form-label mx-1">Greenformer solver</label>
                        <select id="auto-fact-solver" class="form-select" onchange=refreshSample(4)>
                            <option value="random">Random</option>
                            <option value="svd">SVD</option>
                            <option value="snmf">SNMF</option>
                        </select>
                    </div>
                    <div class="col-2 select-auto-fact">
                        <label for="auto-fact-rank" class="form-label mx-1">Greenformer rank</label>
                        <select id="auto-fact-rank" class="form-select" onchange=refreshSample(5)>
                            <option value="64">64</option>
                            <option value="128">128</option>
                            <option value="192">192</option>
                            <option value="256">256</option>
                            <option value="320">320</option>
                        </select>
                    </div>
                </div>
                <div id="go-to-results" class="row m-1" style="display: none;">
                    <a class="btn btn-success" href="#results-auto-fact">
                        Go to results
                    </a>
                </div>
                <div class="mt-5 align-middle">
                    <div class="row justify-content-between">
                        <div class="col-6 ml-auto">
                            <div class="display-6 text-center mb-3">
                                Your typical modeling pipeline
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="display-6 text-center mb-3">
                                <b style="font-weight: 700;"><span class="_green">Green</span><span class="_former">former</span></b> in your pipeline
                            </div>
                        </div>
                    </div>
                    <div class="row justify-content-between">
                        <div class="col-6 ml-auto">
                            <div class="card h-100 code-box-auto-fact">
                                <div class="card-body">
                                    <div class="card-text">
                                        <p>from <span style="color:rgb(255, 175, 89)">your_project</span> import <span style="color:rgb(255, 241, 161)">load_model</span>, <span style="color:rgb(255, 241, 161)">train</span>, <span style="color:rgb(255, 241, 161)">predict</span></p>
                                        <p>model = <span style="color:rgb(255, 241, 161)">load_model</span>(<span class="model_type" style="color:rgb(255, 175, 89)">'transformer'</span>)</p>
                                        <p class="training_phase">model = <span style="color:rgb(255, 241, 161)">train</span>(<span style="color:rgb(255, 175, 89)">model</span>)</p>
                                        <p>score = <span style="color:rgb(255, 241, 161)">predict</span>(<span style="color:rgb(255, 175, 89)">model</span>)</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="card h-100 code-box-auto-fact">
                                <div class="card-body">
                                    <div class="card-text">
                                        <div class="card-text mb-5">
                                            <p>from <span style="color:rgb(255, 175, 89)">your_project</span> import <span style="color:rgb(255, 241, 161)">load_model</span>, <span style="color:rgb(255, 241, 161)">train</span>, <span style="color:rgb(255, 241, 161)">predict</span><span id="submodule_import">, <span style="color:rgb(255, 241, 161)">get_submodules</span></span></p>
                                            <p>from <span style="color:rgb(183, 255, 0)">greenformer</span> import <span style="color:rgb(183, 255, 0)">auto_fact</span></p>
                                            <p>model = <span style="color:rgb(255, 241, 161)">load_model</span>(<span class="model_type" style="color:rgb(255, 175, 89)">'transformer'</span>)</p>
                                            <p id="pre_training_autofact_model">model = <span style="color:rgb(183, 255, 0)">auto_fact</span>(<span style="color:rgb(90, 223, 247)">module</span>=<span style="color:rgb(255, 175, 89)">model</span>, <span style="color:rgb(90, 223, 247)">rank</span>=<span id="rank_pre" style="color:rgb(255, 175, 89)">64</span>, <span style="color:rgb(90, 223, 247)">solver</span>=<span style="color:rgb(255, 175, 89)">'random'</span>, <span style="color:rgb(90, 223, 247)">num_iter</span>=<span id="num_iter" style="color:rgb(255, 175, 89)">50</span>, <span style="color:rgb(90, 223, 247)">submodules</span>=<span style="color:rgb(255, 175, 89)"><i>None</i></span>)</p>
                                            <p class="training_phase">model = <span style="color:rgb(255, 241, 161)">train</span>(<span style="color:rgb(255, 175, 89)">model</span>)</p>
                                            <p id="submodule_call">submodules = <span style="color:rgb(255, 241, 161)">get_submodules</span>(<span style="color:rgb(255, 175, 89)">model</span>,<span class="model_type" style="color:rgb(255, 175, 89)">'bert-base'</span>)</p>
                                            <p id="post_training_autofact_model">model = <span style="color:rgb(183, 255, 0)">auto_fact</span>(<span style="color:rgb(90, 223, 247)">module</span>=<span style="color:rgb(255, 175, 89)">model</span>, <span style="color:rgb(90, 223, 247)">rank</span>=<span id="rank_post" style="color:rgb(255, 175, 89)">64</span>, <span style="color:rgb(90, 223, 247)">solver</span>=<span id="solver" style="color:rgb(255, 175, 89)">'svd'</span>, <span style="color:rgb(90, 223, 247)">num_iter</span>=<span id="num_iter" style="color:rgb(255, 175, 89)">50</span>, <span style="color:rgb(90, 223, 247)">submodules</span>=<span id="submodule_param" style="color:rgb(255, 175, 89)"><i>None</i></span>)</p>
                                            <p>score = <span style="color:rgb(255, 241, 161)">predict</span>(<span style="color:rgb(255, 175, 89)">model</span>)</p>
                                        </div>
                                    </div>
                                    <a class="btn text-light float-end try-auto-fact" href="#"><i class="fas fa-external-link-alt"></i><span id="try-auto-fact-text"> Try <b>Greenformer</b> for <b><span id="colab-auto-fact-style">Factorization-by-design</span></b> on Google Colab</span></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="results-auto-fact">
                    <div class="row justify-content-between my-1">
                        <div class="col-6 ml-auto">
                            <div class="card h-100">
                                <div class="card-body">
                                    <div class="card-text text-center align-middle">
                                        <div class="column">
                                            <div class="row">
                                                <div class="col my-1">
                                                    <div class="lead">Accuracy</div>
                                                    <div id="acc_ori" class="display-6 fw-bold">80.25%</div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col my-1">
                                                    <div class="lead">GPU time (ms)</div>
                                                    <div id="gpu_ori" class="display-6 fw-bold">50s</div>
                                                </div>
                                                <div class="col my-1">
                                                    <div class="lead">CPU time (ms)</div>
                                                    <div id="cpu_ori" class="display-6 fw-bold">55s</div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col my-1">
                                                    <div class="lead">Memory (MB)</div>
                                                    <div id="memory_ori" class="display-6 fw-bold">100</div>
                                                </div>
                                                <div class="col my-1">
                                                    <div class="lead">Parameters (mio)</div>
                                                    <div id="param_ori" class="display-6 fw-bold">43</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <div class="card-text text-center">
                                        <div class="column">
                                            <div class="row">
                                                <div class="col row my-1">
                                                    <div class="col">
                                                        <div id="acc_fact_title" class="lead">
                                                            Accuracy
                                                        </div>
                                                        <div id="acc_fact" class="display-6 fw-bold">77.94%</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col row my-1">
                                                    <div class="col">
                                                        <div id="gpu_fact_title" class="lead">GPU time (ms)</div>
                                                        <div id="gpu_fact" class="display-6 fw-bold">40s</div>
                                                    </div>
                                                </div>
                                                <div class="col row my-1">
                                                    <div class="col">
                                                        <div id="cpu_fact_title" class="lead">CPU time (ms)</div>
                                                        <div id="cpu_fact" class="display-6 fw-bold">45s</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col row my-1">
                                                    <div class="col">
                                                        <div id="memory_fact_title" class="lead">Memory (MB)</div>
                                                        <div id="memory_fact" class="display-6 fw-bold">100</div>
                                                    </div>
                                                </div>
                                                <div class="col row my-1">
                                                    <div class="col">
                                                        <div id="param_fact_title" class="lead">Parameters (mio)</div>
                                                        <div id="param_fact" class="display-6 fw-bold">43</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="alert alert-info text-center align-middle" style="display: none;" role="alert">
                        <div>
                            <span id="speed_margin" style="font-size: 2em;">50%</span> GPU speed <span id=speed_sign>boost</span> <span id="trade-off">in exchange of</span> <span id="performance_margin" style="font-size: 2em;">10%</span> <span id="performance_sign">decrease</span> in accuracy performance
                        </div>
                    </div>
                </div>
                <div id="examples" class="text-center my-5">
                    <div class="display-7 lead mb-3">Next stop: <b style="font-weight: 700;"><span class="_green">Green</span><span class="_former">former</span></b> on Google Colab</div>
                    <div class="row row-cols-1 row-cols-md-3 g-6 m-3">
                        <div class="col">
                            <div class="post-it-auto-fact card h-100">
                                <div class="card-body d-flex flex-column">
                                    <p class="card-text">Faster and memory efficient training without sacrificing performance</p>
                                </div>
                                <div class="card-footer post-it-auto-fact-footer">
                                    <a class="btn btn-sm btn-success fw-bold" target="_blank" href="https://colab.research.google.com/drive/1mFMiD-vUjUWoI_P1_RT4AvsGopdE4uuG?usp=sharing">Factorization-by-design</a>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="post-it-auto-fact card h-100">
                                <div class="card-body">
                                    <p class="card-text">Productionize a pre-trained model in a faster, lighter, and cheaper way</p>
                                </div>
                                <div class="card-footer post-it-auto-fact-footer">
                                    <a class="btn btn-sm btn-success fw-bold" target="_blank" href="https://colab.research.google.com/drive/19OkfRuF1IFowmYL71LwRXkkm-OwhpQ1G?usp=sharing">Post-training</a>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="post-it-auto-fact card h-100">
                                <div class="card-body">

                                    <p class="card-text">More efficient few-shot in-context learning using billions parameters models </p>
                                </div>
                                <div class="card-footer post-it-auto-fact-footer">
                                    <a class="btn btn-sm btn-success fw-bold" target="_blank" href="https://colab.research.google.com/drive/1w7AySF9mlHDu5IQ0XaH436tGeuGzqfxc?usp=sharing">In-context learning</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="about" class="about-auto-fact">
            <div class="container container-fluid py-5">
                <div class="display-4 text-center">More about <b style="font-weight: 700;"><span class="_green">Green</span><span class="_former">former</span></b></div>
                    <div class="lead text-center m-3">
                        Greenformer is flexible, easy-to-use, and applicable for multiple scenarios.</br>
                        Gain up to <b>1.5x speed increase</b> while maintaining 93% of the performance by utilising Greenformer.</br>
                    </div>
                    <div class="row justify-content-center text-center my-5">
                        <div class="col">
                            <div class="display-7 text-center mb-3">
                                Performance and efficiency trade-off
                            </div>
                            <img src="img/Performance comparisons.png" class="w-100">
                            <div class="m-3">
                                <div><em>Performance and efficiency trade-off of utilizing Greenformer on:</em></div>
                                <div><em><b>Left:</b> factorization-by-design, <b>Center:</b> post-training factorization, <b>Right:</b> in-context learning factorization</em></div>
                            </div>
                        </div>
                    </div>
                    <div class="lead text-center m-3 long-text-auto-fact">
                        Greenformer performs decomposition to the weight of <b>linear</b> and <b>convolution</b> layers within the models utilizing factorization solvers like <b>random, SVD, or SMNF</b>. It replaces: 1) the linear layers with <b>Linear Encoder-Decoder (LED)</b> layers and 2) the convolution layers with <b>Convolution Encoder-Decoder (CED)</b> layers. Greenformer supports factorization with either a predefined static rank or dynamic ranks across all layers by computing the rank based on a ratio to the maximum rank of the corresponding layer.</br>
                    </div>
                    <div class="row justify-content-center my-5">
                            <div class="display-7 text-center mb-3">
                                LED and CED layers in action
                            </div>
                            <div class="col">
                                <div class="row">
                                    <span class="col" style="text-align: right;"><img src="img/LED.gif" width="100%" /></span>
                                    <span class="col" style="text-align: left;"><img src="img/CED.gif" width="100%" /></span>
                                </div>
                                <div class="row mt-3">
                                    <em style="text-align: center;"><b>Left:</b> Low-rank  Encoder-Decoder (LED) layer, <b>Right:</b> Convolution Encoder-Decoder (CED) layer.</em>
                                </div>
                            </div>
                    </div>
                    <div class="lead text-center m-3" style="display: none;">
                        <p><b>Find out even more in:</b></p>
                        <small class="long-text-auto-fact">
                            <div class="text-success fw-bold">Greenformer: Factorization Library for More Efficient Deep Learning Models</div>
                            <div>Cahyawijaya, S.; Winata, G. I.; Lovenia, H.; Wilie, B. I.; Dai, W.; Ishii, E.; and Fung, P.</div>
                            <div>In 36th AAAI Conference on Artificial Intelligence (Demo Track), AAAI 2022, Vancouver, Canada, Feb 22 - March 1, 2022</div>
                            <div>More details: Paper to be linked in the near future</div>
                        </small>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="contact" class="contact-auto-fact">
            <div class="container container-fluid py-5">
                <div class="row justify-content-between">
                    <div class="col-6 footer-items-auto-fact">
                        <a target="_blank" href="https://github.com/SamuelCahyawijaya/greenformer" class="text-light" style="text-decoration: none;">
                            <div class="lead mt-3 fw-bold"><i class="fab fa-github mt-3 me-3 display-6"></i>GitHub</div>
                            <div class="my-3">Visit <b><span class="_green">Green</span><span class="_former">former</span></b> repository here.</div>
                        </a>
                        <a target="_blank" href="https://pypi.org/project/greenformer/" class="text-light" style="text-decoration: none;">
                            <div class="lead mt-3 fw-bold"><i class="fab fa-python mt-5 me-3 display-6"></i>PyPi</div>
                            <div class="my-3">Install <b><span class="_green">Green</span><span class="_former">former</span></b> from PyPi.</div>
                        </a>
                    </div>
                    <div class="col-6 footer-items-auto-fact">
                        <div class="lead my-3 fw-bold">Cite us</div>
                        <div class="my-3" style="text-align: justify;"><!-- Greenformer has been accepted by AAAI 2022 and -->You can find our paper <a href="https://arxiv.org/abs/2109.06762">here</a>. If you are using any component of <b><span class="_green">Green</span><span class="_former">former</span></b> for research purposes, please cite the following paper:</div>
                        <pre class="w-100 text-dark">@misc{cahyawijaya2021greenformer,<br>    title={Greenformer: Factorization Toolkit for Efficient Deep Neural Networks},<br>    author={Samuel Cahyawijaya and Genta Indra Winata and Holy Lovenia and Bryan Wilie and Wenliang Dai and Etsuko Ishii and Pascale Fung},<br>    year={2021},<br>    eprint={2109.06762},<br>    archivePrefix={arXiv},<br>    primaryClass={cs.LG}<br>}</pre>
                    </div>
                </div>
            </div>
        </div>

        <script>
            var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
            var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
                return new bootstrap.Popover(popoverTriggerEl)
            })

            var popover = new bootstrap.Popover(document.querySelector('.popover-dismiss'), {
                trigger: 'focus'
            })
        </script>
    </body>
    <footer class="footer-auto-fact text-light">
        <div class="text-center p-4">
            © 2021 Copyright:
        <a class="text-reset fw-bold" href="#"><b class="greenformer"><span class="_green">Green</span><span class="_former">former</span></b></a>
        </div>
    </footer>
</html>
